{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../src/ScreenSubscribe.svelte",
    "../../src/ScreenPublish.svelte"
  ],
  "sourcesContent": [
    "<!--\n<span>ScreenSubscribe</span>\n<tag>{broadcasterSockId}</tag>\n-->\n<video muted controls id=\"video\" bind:this={video_el}></video>\n<!-- <button on:click={()=> window.page('/test/ccsdfsd')} >goto ccsdfsd</button> -->\n<style>\nvideo{\n  max-width: 100%;\n  max-height: 100vh;\n  border: solid 2px black;\n  background-color: black;\n}\n</style>\n\n<script>\nexport let broadcasterSockId\nexport let mysockid\nlet video_el\n//$:console.log('ScreenSubscribe broadcasterSockId', broadcasterSockId)\n\nsocket.emit('initP2PWith', broadcasterSockId);\ninitP2PWith(broadcasterSockId, false);\n\n</script>\n",
    "<h2>Screen Share from your browser</h2>\n<div style=\"margin-bottom:1em\">\n  <span class=\"badge badge-pill badge-primary\">Free</span>\n  <span class=\"badge badge-pill badge-primary\">No Install</span>\n  <span class=\"badge badge-pill badge-primary\">No Extensions</span>\n  <span class=\"badge badge-pill badge-primary\">No Signup</span>\n</div>\n\n<div style=\"position:relative; height:10em;   border: solid 2px black;\">\n  <video muted id=\"video\" bind:this={video_el}></video>\n  {#if !videoIsPlaying}\n  <button \n    class=\"btn btn-dark centered-element\" \n    on:click={startBroadcast} \n    style=\"\n    color: lawngreen;\"\n  >\n    <center><img src=\"broadcast.svg\" style=\"width:3em;color: lawngreen;\" alt=\"broadcast\"></center>\n   \n    START<br>\n    SCREENSHARE<br>\n    BROADCAST\n  </button>  \n  {/if}\n</div>\n<img src=\"stand.png\" alt=\"stand\" style=\"width: 10em;\">\n<!--\n<button \n  class=\"btn btn-primary\" \n  on:click={startBroadcast} \n  use:puf={{text:'opaa'}}\n>\nStart Screenshare broadcast\n</button>\n\n<button \n  class=\"btn btn-secondary\" \n  use:puf={{text:`\n  <div class=\"toast\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" style=\"background-color:white; border:solid 1px grey\">\n  <div class=\"toast-header\">\n    <img src=\"...\" class=\"rounded mr-2\" alt=\"...\">\n    <strong class=\"mr-auto\">Bootstrap</strong>\n    <small>11 mins ago</small>\n    <button type=\"button\" class=\"ml-2 mb-1 close\" data-dismiss=\"toast\" aria-label=\"Close\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"toast-body\">\n    Hello, world! This is a toast message.\n  </div>\n</div>\n`, duration_sec:1}}\n>\npuf\n</button>\n-->\n{#if videoIsPlaying}\n  <button \n    class=\"btn btn-secondary\" \n    on:click={stopBroadcast} \n    use:puf={{text:'Broadcast stopped.'}}\n  >\n  Stop Screenshare\n  </button>\n{/if}\n<!--\n<button \n  class=\"btn\" \n  on:click={()=>navigator.clipboard.readText().then(c=> console.log(c))} \n  use:puf={{text:'read'}}\n>\nread clipboard\n</button>\n-->\n<label style=\"margin-top:1em\">Copy and Share the meeting URL with the viewers</label>\n\n<div>\n  <a href=\"{loc}?room={mysockid}\" target=\"_blank\">{loc}?room={mysockid}</a>\n  <svg use:puf={{text:'Copied to clipboard'}} style=\"width:1em; cursor: pointer;enable-background:new 0 0 460 460;\" title=\"Copy to clipboard\" \n  on:click={cp2kb} version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\n    viewBox=\"0 0 460 460\" xml:space=\"preserve\">\n  <g>\n    <g>\n      <g>\n        <path d=\"M425.934,0H171.662c-18.122,0-32.864,14.743-32.864,32.864v77.134h30V32.864c0-1.579,1.285-2.864,2.864-2.864h254.272\n          c1.579,0,2.864,1.285,2.864,2.864v254.272c0,1.58-1.285,2.865-2.864,2.865h-74.729v30h74.729\n          c18.121,0,32.864-14.743,32.864-32.865V32.864C458.797,14.743,444.055,0,425.934,0z\"/>\n        <path d=\"M288.339,139.998H34.068c-18.122,0-32.865,14.743-32.865,32.865v254.272C1.204,445.257,15.946,460,34.068,460h254.272\n          c18.122,0,32.865-14.743,32.865-32.864V172.863C321.206,154.741,306.461,139.998,288.339,139.998z M288.341,430H34.068\n          c-1.58,0-2.865-1.285-2.865-2.864V172.863c0-1.58,1.285-2.865,2.865-2.865h254.272c1.58,0,2.865,1.285,2.865,2.865v254.273h0.001\n          C291.206,428.715,289.92,430,288.341,430z\"/>\n      </g>\n    </g>\n  </g>\n  </svg>\n</div>\n\n<style>\nvideo{\n  max-width: 100%;\n  max-height: 100%;\n  height: 10em;\n  background-color: black;\n}\n.centered-element {\n  position: absolute;\n  left: 0;\n  right:0;\n  top: 0;\n  bottom: 0;\n  width:100%;\n}\n</style>\n<script>\nimport {puf} from './puf.js'\nexport let mysockid = null\nexport let stream = null;\nwindow.stream=stream; // Privremeno\nlet video_el\nlet videoIsPlaying = false\nlet loc = document.location.href\n\nfunction cp2kb(){\n  var link = loc + '?room=' + mysockid\n  navigator.clipboard.writeText(link)\n}\n\n\nfunction startBroadcast(){\n//getScreenId(function (error, sourceId, screen_constraints) {\n  //console.log('screen_constraints',screen_constraints)\n  //navigator.getUserMedia = navigator.mozGetUserMedia || navigator.webkitGetUserMedia;\n  stream = null;\n  let displayMediaOptions = {video: true, audio: false};\n  /*\n  if (self.get('audio'))\n    displayMediaOptions = {\n      video: true,\n      audio: true\n    }\n  console.log('audio', displayMediaOptions)\n*/\n  try {    \n    navigator.mediaDevices.getDisplayMedia(displayMediaOptions).then(function(stream){\n      stream=stream;\n      window.stream=stream;\n      video_el.srcObject = stream;\n      video_el.play();\n      videoIsPlaying = true;\n      // za sve ortace koji su vec tu (npr broadcaster je prekinuo pa startovao stream)\n      Object.keys(window.peers).forEach(function(peer) {\n        window.peers[peer].addStream(stream);// add streams to peer dynamically\n      });\n\n      stream.addEventListener('inactive', e => {\n        // on \"stop share\" from system dialog\n        console.log('Capture stream inactive - stop broadcasting!');\n        stopBroadcast();\n      });\n\n    });\n  } catch(err) {\n    console.error(\"stream Error: \" + err);\n  }                        \n    //});\n}\n/*\nself.on('cp2kb', function(){\n  var link = self.get('loc') + '?id=' + self.get('mysockid')\n  navigator.clipboard.writeText(link)//.then(e=>iziToast.success({ message: 'Code copied to clipboard.'}))\n  self.set('puf', true);\n  setTimeout(function(){\n    self.set('puf', false);\n  },500)\n})\n*/\n\nfunction stopBroadcast(){\n  window.stream.getTracks().forEach(function(track) {\n    track.stop();\n  });\n  videoIsPlaying = false\n  Object.keys(window.peers).forEach(function(peer) {\n    window.peers[peer].send('broadcastEnd');\n  });\n/*\n  setTimeout(function(){\n    Object.keys(window.peers).forEach(function(peer) {\n      window.peers[peer].destroy();\n    });\n  },1)\n*/\n}\n</script>"
  ],
  "names": [],
  "mappings": "AAOA,oBAAK,CAAC,AACJ,SAAS,CAAE,IAAI,CACf,UAAU,CAAE,KAAK,CACjB,MAAM,CAAE,KAAK,CAAC,GAAG,CAAC,KAAK,CACvB,gBAAgB,CAAE,KAAK,AACzB,CAAC;ACsFD,oBAAK,CAAC,AACJ,SAAS,CAAE,IAAI,CACf,UAAU,CAAE,IAAI,CAChB,MAAM,CAAE,IAAI,CACZ,gBAAgB,CAAE,KAAK,AACzB,CAAC,AACD,iBAAiB,eAAC,CAAC,AACjB,QAAQ,CAAE,QAAQ,CAClB,IAAI,CAAE,CAAC,CACP,MAAM,CAAC,CACP,GAAG,CAAE,CAAC,CACN,MAAM,CAAE,CAAC,CACT,MAAM,IAAI,AACZ,CAAC"
}